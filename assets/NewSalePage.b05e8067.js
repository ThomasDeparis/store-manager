import{Q as m}from"./QPage.5de83ca0.js";import{_ as c,d as p,N as d,w as l,c as f,G as S,H as C,I as N,J as g,P as h,M as w,j as y}from"./index.9f4750be.js";import{u as _}from"./customer-store.7cd3fc73.js";import{u as I}from"./user-store.9a7bf1de.js";import{u as O,a as $}from"./order-error-handler.3231cc46.js";import{u as P}from"./notify-handler.22bc6a9f.js";import{t as b}from"./index.5d49afe9.js";import{O as B}from"./OrderCreation.62bca042.js";import"./errortype.c2c282ff.js";import"./QItem.a953653e.js";import"./product-store.8720c5f0.js";import"./vue-i18n.runtime.77fe3db3.js";import"./QForm.22a0a8d0.js";import"./PriceInput.65611463.js";const k=p({name:"NewSalePage",components:{OrderCreation:B},props:{customerId:{type:String,required:!1}},setup(){const r=I(),e=_(),a=O(),s=P(),n=d();r.currentStore&&e.loadCustomers(r.currentStore),l(()=>r.currentStore,()=>{var t;(e.customers==null||((t=e.customers)==null?void 0:t.length)===0)&&e.loadCustomers(r.currentStore)});const i=async t=>{try{const{recipientId:o,...u}=t;await a.addCustomerOrder({customerId:o,...u}),s.NotifySuccess(b("order.created")),n.push({name:"orders"})}catch(o){s.NotifyError($(o))}};return{customersList:f(()=>e.customers),onSubmit:i}}});function v(r,e,a,s,n,i){const t=S("order-creation");return C(),N(m,{padding:""},{default:g(()=>[h("h4",null,w(r.$t("order.newSale")),1),y(t,{"recipient-id":r.customerId,"recipients-list":r.customersList,"onSubmit:order":e[0]||(e[0]=o=>r.onSubmit(o)),"auto-sell-price":!0},null,8,["recipient-id","recipients-list"])]),_:1})}var x=c(k,[["render",v]]);export{x as default};
