import{ai as h}from"./index.3764815b.js";import{E as l}from"./errortype.62e362d6.js";import{c as d,q as g,w as p,g as f,d as y,a as m,s as C}from"./user-store.ff76f0ea.js";const E=h("customer",{state:()=>({customers:[],isLoading:!1,storeId:""}),actions:{async loadCustomers(s){this.storeId=s,this.customers=[],this.isLoading=!0;const t=d(m,"customers"),o=g(t,p("storeId","==",s)),u=await f(o);this.customers=u.docs.map(function(e){var r,a,i,n,c;return{id:e.id,name:(r=e.data())==null?void 0:r.name,phone:(a=e.data())==null?void 0:a.phone,email:(i=e.data())==null?void 0:i.email,storeId:(n=e.data())==null?void 0:n.storeId,lastChangeUserId:(c=e.data())==null?void 0:c.lastChangeUserId}}),this.isLoading=!1},async addCustomer(s){try{const t=y(d(m,"customers"));s.id=t.id,await C(t,s),this.customers.push(s)}catch(t){throw{productReference:s.name,errorType:l.Technical,message:t.toString()}}}}});export{E as u};
