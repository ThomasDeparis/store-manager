import{ai as v}from"./index.44d67d2d.js";import{E as t}from"./errortype.037c0a40.js";import{c as i,q as g,w as I,g as u,d as l,a as n,s as f,b as y}from"./user-store.6337866a.js";const E=v("provider",{state:()=>({providers:[],error:null,isLoading:!1,storeId:""}),actions:{async loadProviders(r){this.storeId=r,this.providers=[],this.isLoading=!0;const o=i(n,"providers"),s=g(o,I("storeId","==",r)),a=await u(s);this.providers=a.docs.map(function(e){var d,c,h,p,m;return{id:e.id,name:(d=e.data())==null?void 0:d.name,phone:(c=e.data())==null?void 0:c.phone,email:(h=e.data())==null?void 0:h.email,storeId:(p=e.data())==null?void 0:p.storeId,lastChangeUserId:(m=e.data())==null?void 0:m.lastChangeUserId}}),this.isLoading=!1},async addProvider(r){try{const o=l(i(n,"providers"));r.id=o.id,await f(o,r),this.providers.push(r)}catch(o){throw{productReference:r.name,errorType:t.Technical,message:o.toString()}}},async editProvider(r){try{const o=l(i(n,"providers"),r.id);await y(o,{name:r.name,email:r.email,phone:r.phone,lastChangeUserId:r.lastChangeUserId});const s=this.providers.findIndex(e=>e.id===r.id&&e.storeId===r.storeId);if(s<0)throw{providerName:r.id,errorType:t.Technical,message:"providerStore.editProvider : cannot find provider in store to edit it"};const a=this.providers[s];a.name=r.name,a.email=r.email,a.phone=r.phone,a.lastChangeUserId=r.lastChangeUserId}catch(o){throw{providerName:r.id,errorType:t.Technical,message:o.toString()}}}}});export{E as u};
