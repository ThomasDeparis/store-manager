import{Q as c}from"./QPage.8dded32a.js";import{_ as m,d as p,O as d,N as l,w as f,c as S,G as C,H as N,I as g,J as h,R as w,M as y,j as _}from"./index.3e052ca9.js";import{u as O}from"./customer-store.6a5feed2.js";import{u as I,a as $}from"./order-error-handler.5b122c7d.js";import{u as b}from"./notify-handler.f1c2246c.js";import{t as B}from"./index.be4ea036.js";import{O as P}from"./OrderCreation.0d2ab7ed.js";import"./errortype.8692b588.js";import"./QItem.0d18ef71.js";import"./product-store.12c5170f.js";import"./vue-i18n.runtime.e96c4d73.js";import"./QForm.f5f883d9.js";import"./PriceInput.7b92089e.js";const k=p({name:"NewSalePage",components:{OrderCreation:P},props:{customerId:{type:String,required:!1}},setup(){const r=d(),e=O(),a=I(),s=b(),n=l();r.currentStore&&e.loadCustomers(r.currentStore),f(()=>r.currentStore,()=>{var t;(e.customers==null||((t=e.customers)==null?void 0:t.length)===0)&&e.loadCustomers(r.currentStore)});const i=async t=>{try{const{recipientId:o,...u}=t;await a.addCustomerOrder({customerId:o,...u}),s.NotifySuccess(B("order.created")),n.push({name:"orders"})}catch(o){s.NotifyError($(o))}};return{customersList:S(()=>e.customers),onSubmit:i}}});function v(r,e,a,s,n,i){const t=C("order-creation");return N(),g(c,{padding:""},{default:h(()=>[w("h4",null,y(r.$t("order.newSale")),1),_(t,{"recipient-id":r.customerId,"recipients-list":r.customersList,"onSubmit:order":e[0]||(e[0]=o=>r.onSubmit(o)),"auto-sell-price":!0},null,8,["recipient-id","recipients-list"])]),_:1})}var U=m(k,[["render",v]]);export{U as default};
