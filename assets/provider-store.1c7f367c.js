import{ai as v}from"./index.60a11d20.js";import{E as t}from"./errortype.bf730c74.js";import{c as n,q as g,w as u,g as I,d as l,a as i,s as f,b as y}from"./user-store.3d0bea97.js";const E=v("provider",{state:()=>({providers:[],error:null,isLoading:!1}),actions:{async loadProviders(r){this.isLoading=!0;const o=n(i,"providers"),a=g(o,u("storeId","==",r)),s=await I(a);this.providers=s.docs.map(function(e){var c,d,h,p,m;return{id:e.id,name:(c=e.data())==null?void 0:c.name,phone:(d=e.data())==null?void 0:d.phone,email:(h=e.data())==null?void 0:h.email,storeId:(p=e.data())==null?void 0:p.storeId,lastChangeUserId:(m=e.data())==null?void 0:m.lastChangeUserId}}),this.isLoading=!1},async addProvider(r){try{const o=l(n(i,"providers"));r.id=o.id,await f(o,r),this.providers.push(r)}catch(o){throw{productReference:r.name,errorType:t.Technical,message:o.toString()}}},async editProvider(r){try{const o=l(n(i,"providers"),r.id);await y(o,{name:r.name,email:r.email,phone:r.phone,lastChangeUserId:r.lastChangeUserId});const a=this.providers.findIndex(e=>e.id===r.id&&e.storeId===r.storeId);if(a<0)throw{providerName:r.id,errorType:t.Technical,message:"providerStore.editProvider : cannot find provider in store to edit it"};const s=this.providers[a];s.name=r.name,s.email=r.email,s.phone=r.phone,s.lastChangeUserId=r.lastChangeUserId}catch(o){throw{providerName:r.id,errorType:t.Technical,message:o.toString()}}}}});export{E as u};
